!function(i){var t={};function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return i[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=i,e.c=t,e.d=function(i,t,n){e.o(i,t)||Object.defineProperty(i,t,{enumerable:!0,get:n})},e.r=function(i){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},e.t=function(i,t){if(1&t&&(i=e(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var o in i)e.d(n,o,function(t){return i[t]}.bind(null,o));return n},e.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(t,"a",t),t},e.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},e.p="",e(e.s=1)}([function(i,t,e){},function(i,t,e){"use strict";e.r(t);e(0);new class{constructor(){this.dom={},this.dom.$container=$(".group-custom-forms.edit"),this.dom.$container.length&&(this.dom.thankyou={$container:$("#field-do-send-thankyou"),$checked:$("#field-do-send-thankyou input[type=checkbox]"),$options:$("#send-thankyou-options")},this.dom.fields={$container:$("#custom-form-fields")},this.dom.notification={$container:$("#field-custom-form-notifications")},this.bindEvents(),this.initialStates())}bindEvents(){this.dom.thankyou.$container.on("toggle",(i,t)=>{this.fieldDoSendThankYou(t)}),this.dom.fields.$container.on("click",".js-remove-field",i=>{setTimeout(()=>{this.refreshNotifyConditionals(!0)},50)}).on("blur",".form-builder__field__label",()=>{this.refreshNotifyConditionals()}).find(".js-add-field").on("click",()=>{this.refreshNotifyConditionals()}),this.dom.notification.$container.on("dynamic-table:add",(i,t)=>{t.find("select.js-notification-condition-enabled").trigger("change"),this.refreshNotifyConditionals()}).on("change","select.js-notification-condition-enabled",i=>{this.toggleNotifyConditionals("1"===i.currentTarget.value,$(i.currentTarget).closest("td"))})}initialStates(){this.fieldDoSendThankYou(this.dom.thankyou.$checked.is(":checked")),this.dom.notification.$container.find("select.js-notification-condition-enabled").trigger("change"),this.refreshNotifyConditionals(),this.dom.notification.$container.find("select.js-notification-condition-field-id").each((i,t)=>{let e=$(t);if(e[0].hasAttribute("data-dynamic-table-value")){let i=e.data("dynamic-table-value");$('option[value="'+i+'"]',e).prop("selected",!0),e.trigger("change")}})}fieldDoSendThankYou(i){i?this.dom.thankyou.$options.show():this.dom.thankyou.$options.hide(),"object"==typeof window._nails&&window._nails.addStripes()}toggleNotifyConditionals(i,t){t.find([".js-notification-condition-field-id",".js-notification-condition-operator",".js-notification-condition-value"].join(", ")).prop("disabled",!i).parent().css({opacity:i?1:.5,"pointer-events":i?"auto":"none"})}refreshNotifyConditionals(i){let t=[];this.dom.fields.$container.find(".form-builder__field").each((i,e)=>{let n=$(e);t.push({id:n.find(".form-builder__field__id").val(),fieldNumber:n.find(".form-builder__field__field-number").val(),label:n.find(".form-builder__field__label").val()})});let e=[];if(this.dom.notification.$container.find("select.js-notification-condition-field-id").each((n,o)=>{let d=$(o),a=d.closest("tr"),l=d.val();d.find("option").remove(),$.each(t,(i,t)=>{let e=$("<option>").attr("value",t.id||"fieldNumber:"+t.fieldNumber).html(t.label);d.append(e)});let r=d.find('option[value="'+l+'"]');if(r.length)r.prop("selected",!0);else if(i){a.find(".js-notification-condition-enabled").val(0).trigger("change");let i=a.find(".js-notification-email").val();e.push(i||"The item at position "+(n+1))}d.trigger("change")}),e.length){let i='The following notifications have been set to "Always" as their condition can no longer be satisfied:<br>';for(let t=0;t<e.length;t++)i+="<br>â€“ "+e[t];$("<div>").html(i).dialog({modal:!0,resizable:!1,draggable:!1,title:"Notification conditions changed",width:500,buttons:{OK:function(){$(this).dialog("close")}}}).show()}}}}]);